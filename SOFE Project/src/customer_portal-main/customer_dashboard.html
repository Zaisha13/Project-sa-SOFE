<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Dashboard | Jessie Cane</title>
  <link rel="stylesheet" href="header.css" />
  <link rel="stylesheet" href="customer_dashboard.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script defer src="customer_dashboard.js"></script>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="left-header">
      <img src="images/logo.png" id="drink_logo" alt="Jessie Cane Logo" onerror="this.style.display='none'">
    </div>
    <div class="right-header">
      <a href="customer_dashboard.html" class="nav-btn active">Home</a>
      <a href="drinks.html" class="nav-btn">Menu</a>
      <a href="profile.html" class="nav-btn">Profile</a>
      <a href="inquiry.html" class="nav-btn">Inquiry</a>
      <a href="login.html" class="nav-btn logout">Logout</a>
    </div>
  </header>

  <!-- BANNER -->
  <section class="banner">
    <img src="images/BANNER.png" alt="Banner" />
    <div class="text_overlay">
      <!-- Alternating items: primary heading and service invite -->
      <div id="alt-heading" class="alt-item alt-visible">
        <h1>Welcome to Jessie Cane!</h1>
        <p>Refreshing sugarcane drinks made from nature's purest sweetness.</p>
        <a href="drinks.html"><button>ORDER NOW</button></a>
      </div>

      <div id="service-invite" class="alt-item alt-hidden" style="margin-top:18px; text-align:center;">
        <p style="font-weight:700; color:#FCF2C5; margin-bottom:8px; font-size:32px;">Do you want Jessie Cane Juicebar to serve at your event?</p>
        <div style="display:flex; gap:10px; justify-content:center;">
          <button id="avail-service-btn" class="view-btn">Avail Service</button>
        </div>
      </div>
      <!-- Pause indicator (hidden by default) -->
      <div id="pause-indicator" class="pause-indicator" aria-hidden="true" title="Slideshow paused">⏸</div>
    </div>
  </section>

  <!-- FEATURED DRINKS -->
  <div class="container">
    <h2>Featured Drinks</h2>
    <div class="products" id="featured-drinks">
      <!-- Empty state - will be populated by JavaScript -->
      <div class="empty-state" id="empty-featured">
        <i class="fas fa-glass-water"></i>
        <h3>Menu Coming Soon!</h3>
        <p>Our delicious drinks will be available shortly. Please check back later.</p>
        <a href="drinks.html" class="browse-btn">Browse Menu</a>
      </div>
    </div>
  </div>

  <!-- DEBUG PANEL (Remove in production)
  <div style="position: fixed; bottom: 10px; right: 10px; background: #f8f5e9; padding: 10px; border: 2px solid #146B33; border-radius: 5px; z-index: 1000; font-size: 12px;">
    <strong>Debug Tools:</strong><br>
    <button onclick="checkSyncStatus()" style="margin: 2px; padding: 5px; font-size: 10px;">Check Sync</button>
    <button onclick="manualSync()" style="margin: 2px; padding: 5px; font-size: 10px;">Manual Sync</button>
    <button onclick="debugMenuData()" style="margin: 2px; padding: 5px; font-size: 10px;">Debug Data</button>
  </div> -->

  <!-- FOOTER -->
  <footer>
    <p>© 2025 Jessie Cane. All rights reserved.</p>
  </footer>

  <script>
    // Wire the service invite buttons on the dashboard
    document.addEventListener('DOMContentLoaded', function(){
      const availBtn = document.getElementById('avail-service-btn');
      const declineBtn = document.getElementById('decline-service-btn');
      const invite = document.getElementById('service-invite');
      if (availBtn) {
        availBtn.addEventListener('click', function(){
          window.location.href = 'inquiry.html';
        });
      }
      if (declineBtn && invite) {
        declineBtn.addEventListener('click', function(){
          invite.style.display = 'none';
        });
      }
    });
  </script>

  <script>
    // Alternator: toggles between the heading and the service-invite every 5 seconds
    // with pause/resume when the user hovers or touches the invite.
    (function(){
      const HEADING = document.getElementById('alt-heading');
      const INVITE = document.getElementById('service-invite');
      if (!HEADING || !INVITE) return;

      let showingHeading = true;
      const INTERVAL = 5000; // 5 seconds
      let timerId = null;
      let paused = false;

      function showHeading() {
        INVITE.classList.remove('alt-visible');
        INVITE.classList.add('alt-hidden');
        HEADING.classList.remove('alt-hidden');
        HEADING.classList.add('alt-visible');
        showingHeading = true;
      }

      function showInvite() {
        HEADING.classList.remove('alt-visible');
        HEADING.classList.add('alt-hidden');
        INVITE.classList.remove('alt-hidden');
        INVITE.classList.add('alt-visible');
        showingHeading = false;
      }

      function toggle() {
        if (showingHeading) showInvite(); else showHeading();
      }

      function startTimer() {
        if (timerId) clearInterval(timerId);
        timerId = setInterval(() => { if (!paused) toggle(); }, INTERVAL);
      }

  const PAUSE_IND = document.getElementById('pause-indicator');
  function pause() { paused = true; if (PAUSE_IND) PAUSE_IND.classList.add('pause-indicator--visible'); }
  function resume() { paused = false; if (PAUSE_IND) PAUSE_IND.classList.remove('pause-indicator--visible'); }

      // Pause when user interacts with the invite (hover or touch)
      INVITE.addEventListener('mouseenter', pause);
      INVITE.addEventListener('mouseleave', resume);
      INVITE.addEventListener('touchstart', pause, {passive: true});
      INVITE.addEventListener('touchend', resume);

      // Also pause when hovering over the heading area to avoid accidental flips
      HEADING.addEventListener('mouseenter', pause);
      HEADING.addEventListener('mouseleave', resume);

      // Initialize
      startTimer();
    })();
  </script>
</body>
</html>